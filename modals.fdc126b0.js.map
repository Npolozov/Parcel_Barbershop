{"mappings":"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","sources":["src/js/modals.js","node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js"],"sourcesContent":["class Modal {\n  constructor(options) {\n    let defaultOptions = {\n      isOpen: () => {},\n      isClose: () => {},\n    };\n    this.options = Object.assign(defaultOptions, options);\n    this.modal = document.querySelector('.modal');\n    this.speed = false;\n    this.animation = false;\n    this.isOpen = false;\n    this.modalContainer = false;\n    this.previousActiveElement = false;\n    this.fixBlocks = document.querySelectorAll('.fix-block');\n    this.focusElements = [\n      'a[href]',\n      'input',\n      'button',\n      'select',\n      'textarea',\n      '[tabindex]',\n    ];\n    this.events();\n  }\n\n  events() {\n    if (this.modal) {\n      document.addEventListener(\n        'click',\n        function (e) {\n          const clickedElement = e.target.closest('[data-path]');\n          if (clickedElement) {\n            let target = clickedElement.dataset.path;\n            let animation = clickedElement.dataset.animation;\n            let speed = clickedElement.dataset.speed;\n            this.animation = animation ? animation : 'fade';\n            this.speed = speed ? parseInt(speed) : 300;\n            this.modalContainer = document.querySelector(\n              `[data-target=\"${target}\"]`\n            );\n            this.open();\n            return;\n          }\n\n          if (e.target.closest('.modal-close')) {\n            this.close();\n            return;\n          }\n        }.bind(this)\n      );\n\n      window.addEventListener(\n        'keydown',\n        function (e) {\n          if (e.keyCode == 27) {\n            if (this.isOpen) {\n              this.close();\n            }\n          }\n\n          if (e.keyCode == 9 && this.isOpen) {\n            this.focusCatch(e);\n            return;\n          }\n        }.bind(this)\n      );\n\n      this.modal.addEventListener(\n        'click',\n        function (e) {\n          if (\n            !e.target.classList.contains('modal__container') &&\n            !e.target.closest('.modal__container') &&\n            this.isOpen\n          ) {\n            this.close();\n          }\n        }.bind(this)\n      );\n    }\n  }\n\n  open() {\n    this.previousActiveElement = document.activeElement;\n\n    this.modal.style.setProperty('--transition-time', `${this.speed / 1000}s`);\n    this.modal.classList.add('is-open');\n    this.disableScroll();\n\n    this.modalContainer.classList.add('modal-open');\n    this.modalContainer.classList.add(this.animation);\n\n    setTimeout(() => {\n      this.options.isOpen(this);\n      this.modalContainer.classList.add('animate-open');\n      this.isOpen = true;\n      this.focusTrap();\n    }, this.speed);\n  }\n\n  close() {\n    if (this.modalContainer) {\n      this.modalContainer.classList.remove('animate-open');\n      this.modalContainer.classList.remove(this.animation);\n      this.modal.classList.remove('is-open');\n      this.modalContainer.classList.remove('modal-open');\n\n      this.enableScroll();\n      this.options.isClose(this);\n      this.isOpen = false;\n      this.focusTrap();\n    }\n  }\n\n  focusCatch(e) {\n    const focusable = this.modalContainer.querySelectorAll(this.focusElements);\n    const focusArray = Array.prototype.slice.call(focusable);\n    const focusedIndex = focusArray.indexOf(document.activeElement);\n\n    if (e.shiftKey && focusedIndex === 0) {\n      focusArray[focusArray.length - 1].focus();\n      e.preventDefault();\n    }\n\n    if (!e.shiftKey && focusedIndex === focusArray.length - 1) {\n      focusArray[0].focus();\n      e.preventDefault();\n    }\n  }\n\n  focusTrap() {\n    const focusable = this.modalContainer.querySelectorAll(this.focusElements);\n    if (this.isOpen) {\n      focusable[0].focus();\n    } else {\n      this.previousActiveElement.focus();\n    }\n  }\n\n  disableScroll() {\n    let pagePosition = window.scrollY;\n    this.lockPadding();\n    document.body.classList.add('disable-scroll');\n    document.body.dataset.position = pagePosition;\n    document.body.style.top = -pagePosition + 'px';\n  }\n\n  enableScroll() {\n    let pagePosition = parseInt(document.body.dataset.position, 10);\n    this.unlockPadding();\n    document.body.style.top = 'auto';\n    document.body.classList.remove('disable-scroll');\n    window.scroll({ top: pagePosition, left: 0 });\n    document.body.removeAttribute('data-position');\n  }\n\n  lockPadding() {\n    let paddingOffset = window.innerWidth - document.body.offsetWidth + 'px';\n    this.fixBlocks.forEach(el => {\n      el.style.paddingRight = paddingOffset;\n    });\n    document.body.style.paddingRight = paddingOffset;\n  }\n\n  unlockPadding() {\n    this.fixBlocks.forEach(el => {\n      el.style.paddingRight = '0px';\n    });\n    document.body.style.paddingRight = '0px';\n  }\n}\n\nconst modal = new Modal({\n  isOpen: modal => {\n    console.log(modal);\n    console.log('opened');\n  },\n  isClose: () => {\n    console.log('closed');\n  },\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n"],"names":["$8MBJY","parcelRequire","Modal","options","this","Object","assign","isOpen","isClose","modal","document","querySelector","speed","animation","modalContainer","previousActiveElement","fixBlocks","querySelectorAll","focusElements","events","key","addEventListener","e","clickedElement","target","closest","dataset","path","parseInt","concat","open","close","bind","window","keyCode","focusCatch","classList","contains","activeElement","style","setProperty","add","disableScroll","setTimeout","_this","focusTrap","remove","enableScroll","focusable","focusArray","Array","prototype","slice","call","focusedIndex","indexOf","shiftKey","length","focus","preventDefault","pagePosition","scrollY","lockPadding","body","position","top","unlockPadding","scroll","left","removeAttribute","paddingOffset","innerWidth","offsetWidth","forEach","el","paddingRight","modal1","console","log","defineProperty","module","exports","value","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","props","i","descriptor","enumerable","configurable","writable","protoProps","staticProps"],"version":3,"file":"modals.fdc126b0.js.map"}