{"mappings":"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","sources":["src/js/modals.js"],"sourcesContent":["class Modal {\n  constructor(options) {\n    let defaultOptions = {\n      isOpen: () => {},\n      isClose: () => {},\n    };\n    this.options = Object.assign(defaultOptions, options);\n    this.modal = document.querySelector('.modal');\n    this.speed = false;\n    this.animation = false;\n    this.isOpen = false;\n    this.modalContainer = false;\n    this.previousActiveElement = false;\n    this.fixBlocks = document.querySelectorAll('.fix-block');\n    this.focusElements = [\n      'a[href]',\n      'input',\n      'button',\n      'select',\n      'textarea',\n      '[tabindex]',\n    ];\n    this.events();\n  }\n\n  events() {\n    if (this.modal) {\n      document.addEventListener(\n        'click',\n        function (e) {\n          const clickedElement = e.target.closest('[data-path]');\n          if (clickedElement) {\n            let target = clickedElement.dataset.path;\n            let animation = clickedElement.dataset.animation;\n            let speed = clickedElement.dataset.speed;\n            this.animation = animation ? animation : 'fade';\n            this.speed = speed ? parseInt(speed) : 300;\n            this.modalContainer = document.querySelector(\n              `[data-target=\"${target}\"]`\n            );\n            this.open();\n            return;\n          }\n\n          if (e.target.closest('.modal-close')) {\n            this.close();\n            return;\n          }\n        }.bind(this)\n      );\n\n      window.addEventListener(\n        'keydown',\n        function (e) {\n          if (e.keyCode == 27) {\n            if (this.isOpen) {\n              this.close();\n            }\n          }\n\n          if (e.keyCode == 9 && this.isOpen) {\n            this.focusCatch(e);\n            return;\n          }\n        }.bind(this)\n      );\n\n      this.modal.addEventListener(\n        'click',\n        function (e) {\n          if (\n            !e.target.classList.contains('modal__container') &&\n            !e.target.closest('.modal__container') &&\n            this.isOpen\n          ) {\n            this.close();\n          }\n        }.bind(this)\n      );\n    }\n  }\n\n  open() {\n    this.previousActiveElement = document.activeElement;\n\n    this.modal.style.setProperty('--transition-time', `${this.speed / 1000}s`);\n    this.modal.classList.add('is-open');\n    this.disableScroll();\n\n    this.modalContainer.classList.add('modal-open');\n    this.modalContainer.classList.add(this.animation);\n\n    setTimeout(() => {\n      this.options.isOpen(this);\n      this.modalContainer.classList.add('animate-open');\n      this.isOpen = true;\n      this.focusTrap();\n    }, this.speed);\n  }\n\n  close() {\n    if (this.modalContainer) {\n      this.modalContainer.classList.remove('animate-open');\n      this.modalContainer.classList.remove(this.animation);\n      this.modal.classList.remove('is-open');\n      this.modalContainer.classList.remove('modal-open');\n\n      this.enableScroll();\n      this.options.isClose(this);\n      this.isOpen = false;\n      this.focusTrap();\n    }\n  }\n\n  focusCatch(e) {\n    const focusable = this.modalContainer.querySelectorAll(this.focusElements);\n    const focusArray = Array.prototype.slice.call(focusable);\n    const focusedIndex = focusArray.indexOf(document.activeElement);\n\n    if (e.shiftKey && focusedIndex === 0) {\n      focusArray[focusArray.length - 1].focus();\n      e.preventDefault();\n    }\n\n    if (!e.shiftKey && focusedIndex === focusArray.length - 1) {\n      focusArray[0].focus();\n      e.preventDefault();\n    }\n  }\n\n  focusTrap() {\n    const focusable = this.modalContainer.querySelectorAll(this.focusElements);\n    if (this.isOpen) {\n      focusable[0].focus();\n    } else {\n      this.previousActiveElement.focus();\n    }\n  }\n\n  disableScroll() {\n    let pagePosition = window.scrollY;\n    this.lockPadding();\n    document.body.classList.add('disable-scroll');\n    document.body.dataset.position = pagePosition;\n    document.body.style.top = -pagePosition + 'px';\n  }\n\n  enableScroll() {\n    let pagePosition = parseInt(document.body.dataset.position, 10);\n    this.unlockPadding();\n    document.body.style.top = 'auto';\n    document.body.classList.remove('disable-scroll');\n    window.scroll({ top: pagePosition, left: 0 });\n    document.body.removeAttribute('data-position');\n  }\n\n  lockPadding() {\n    let paddingOffset = window.innerWidth - document.body.offsetWidth + 'px';\n    this.fixBlocks.forEach(el => {\n      el.style.paddingRight = paddingOffset;\n    });\n    document.body.style.paddingRight = paddingOffset;\n  }\n\n  unlockPadding() {\n    this.fixBlocks.forEach(el => {\n      el.style.paddingRight = '0px';\n    });\n    document.body.style.paddingRight = '0px';\n  }\n}\n\nconst modal = new Modal({\n  isOpen: modal => {\n    console.log(modal);\n    console.log('opened');\n  },\n  isClose: () => {\n    console.log('closed');\n  },\n});\n"],"names":["events","this","modal","document","addEventListener","e","clickedElement","target","closest","dataset","path","animation","speed","parseInt","modalContainer","querySelector","open","close","bind","window","keyCode","isOpen","focusCatch","classList","contains","previousActiveElement","activeElement","style","setProperty","add","disableScroll","setTimeout","options","focusTrap","remove","enableScroll","isClose","focusable","querySelectorAll","focusElements","focusArray","Array","prototype","slice","call","focusedIndex","indexOf","shiftKey","length","focus","preventDefault","pagePosition","scrollY","lockPadding","body","position","top","unlockPadding","scroll","left","removeAttribute","paddingOffset","innerWidth","offsetWidth","fixBlocks","forEach","el","paddingRight","constructor","Object","assign","modal1","console","log"],"version":3,"file":"modals.61c6000a.js.map"}